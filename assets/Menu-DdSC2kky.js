import{u as g,j as s,L as m,c as j,r as c,a as f,H as v,b as N,P as y,A as w}from"./index-IbmoVeRk.js";const k="_link_1psx4_1",F="_card_1psx4_9",E="_header_1psx4_23",$="_price_1psx4_37",L="_currency_1psx4_63",S="_rating_1psx4_103",I="_footer_1psx4_131",P="_title_1psx4_139",b="_description_1psx4_155",a={link:k,card:F,header:E,price:$,currency:L,"add-to-cart":"_add-to-cart_1psx4_71",rating:S,footer:I,title:P,description:b},A=e=>{const t=g(),r=n=>{n.preventDefault(),t(j.add(e.id))};return s.jsx(m,{to:`/products/${e.id}`,className:a.link,children:s.jsxs("div",{className:a.card,children:[s.jsxs("div",{className:a.header,style:{backgroundImage:`url(${e.image})`},children:[s.jsxs("div",{className:a.price,children:[e.price," ",s.jsx("span",{className:a.currency,children:"₽"})]}),s.jsx("button",{className:a["add-to-cart"],onClick:r,children:s.jsx("img",{src:"/add-to-cart.svg",alt:"добавить в корзину"})}),s.jsxs("div",{className:a.rating,children:[e.rating," ",s.jsx("img",{src:"/star.svg",alt:"иконка звездочки"})]})]}),s.jsxs("div",{className:a.footer,children:[s.jsx("div",{className:a.title,children:e.name}),s.jsx("div",{className:a.description,children:e.ingredients})]})]})})},C="_wrapper_1i4qu_1",M={wrapper:C},R=({products:e})=>s.jsx("div",{className:M.wrapper,children:e.map(t=>s.jsx(A,{id:t.id,name:t.name,price:t.price,ingredients:t.ingredients.join(", "),image:t.image,rating:t.rating},t.id))}),D="_input_127ix_1",l={"input-wrapper":"_input-wrapper_127ix_1",input:D,"search-icon":"_search-icon_127ix_35"},H=c.forwardRef(function({isValid:t=!0,className:r,...n},i){return s.jsxs("div",{className:l["input-wrapper"],children:[s.jsx("input",{...n,ref:i,className:f(l.input,r,{[l.invalid]:!t})}),s.jsx("img",{className:l["search-icon"],src:"/search.svg",alt:"иконка лупы"})]})}),q="_head_tx4e2_1",X={head:q},B=()=>{const[e,t]=c.useState([]),[r,n]=c.useState(!1),[i,_]=c.useState(),[x,p]=c.useState(),h=async o=>{try{n(!0);const{data:d}=await N.get(`${y}/products`,{params:{name:o}});t(d),n(!1)}catch(d){d instanceof w&&_(d.message),n(!1);return}},u=o=>{p(o.target.value)};return c.useEffect(()=>{h(x)},[x]),s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:X.head,children:[s.jsx(v,{children:"Меню"}),s.jsx(H,{placeholder:"Введите блюдо или состав",onChange:u})]}),s.jsxs("div",{children:[i&&s.jsx(s.Fragment,{children:i}),!r&&e.length>0&&s.jsx(R,{products:e}),!r&&e.length===0&&s.jsx(s.Fragment,{children:"Не найдено блюд по запросу"}),r&&s.jsx(s.Fragment,{children:"Загружаем список продуктов..."})]})]})};export{B as default};
